{"ast":null,"code":"var _jsxFileName = \"/home/boltuzamaki/Downloads/airtable-form-builder/frontend/src/contexts/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport axios from 'axios';\nimport { createContext, useContext, useEffect, useReducer } from 'react';\nimport { toast } from 'react-toastify';\n\n// Initial state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  loading: true,\n  error: null\n};\n\n// Action types\nconst AUTH_ACTIONS = {\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\n  LOGOUT: 'LOGOUT',\n  SET_LOADING: 'SET_LOADING',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  UPDATE_USER: 'UPDATE_USER'\n};\n\n// Reducer\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case AUTH_ACTIONS.LOGIN_START:\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n        token: action.payload.token,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      };\n    case AUTH_ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        error: action.payload\n      };\n    case AUTH_ACTIONS.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        error: null\n      };\n    case AUTH_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case AUTH_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null\n      };\n    case AUTH_ACTIONS.UPDATE_USER:\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          ...action.payload\n        }\n      };\n    default:\n      return state;\n  }\n};\n\n// Create context\nconst AuthContext = /*#__PURE__*/createContext();\n\n// Custom hook to use auth context\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Auth provider component\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Set up axios interceptors\n  useEffect(() => {\n    // Request interceptor to add token\n    const requestInterceptor = axios.interceptors.request.use(config => {\n      if (state.token) {\n        config.headers.Authorization = `Bearer ${state.token}`;\n      }\n      return config;\n    }, error => Promise.reject(error));\n\n    // Response interceptor to handle auth errors\n    const responseInterceptor = axios.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        var _error$response$data;\n        // Token expired or invalid\n        if ((_error$response$data = error.response.data) !== null && _error$response$data !== void 0 && _error$response$data.needsRefresh) {\n          // Try to refresh token\n          refreshToken();\n        } else {\n          // Logout user\n          logout();\n          toast.error('Your session has expired. Please log in again.');\n        }\n      }\n      return Promise.reject(error);\n    });\n\n    // Cleanup interceptors\n    return () => {\n      axios.interceptors.request.eject(requestInterceptor);\n      axios.interceptors.response.eject(responseInterceptor);\n    };\n  }, [state.token]);\n\n  // Check if user is authenticated on app load\n  useEffect(() => {\n    if (state.token) {\n      getCurrentUser();\n    } else {\n      dispatch({\n        type: AUTH_ACTIONS.SET_LOADING,\n        payload: false\n      });\n    }\n  }, []);\n\n  // API functions\n  const getCurrentUser = async () => {\n    try {\n      dispatch({\n        type: AUTH_ACTIONS.SET_LOADING,\n        payload: true\n      });\n      const response = await axios.get('/api/auth/me');\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\n        payload: {\n          user: response.data,\n          token: state.token\n        }\n      });\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Get current user error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to get user data'\n      });\n      localStorage.removeItem('token');\n    }\n  };\n  const loginWithAirtable = async () => {\n    try {\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_START\n      });\n      const response = await axios.get('/api/auth/airtable');\n\n      // Redirect to Airtable OAuth\n      window.location.href = response.data.authUrl;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Airtable login error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Failed to initiate login'\n      });\n      toast.error('Failed to start login process');\n    }\n  };\n  const handleAuthCallback = async token => {\n    try {\n      // Store token\n      localStorage.setItem('token', token);\n\n      // Get user data\n      const response = await axios.get('/api/auth/me', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\n        payload: {\n          user: response.data,\n          token: token\n        }\n      });\n      toast.success('Successfully logged in!');\n      return true;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Auth callback error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Login failed'\n      });\n      localStorage.removeItem('token');\n      toast.error('Login failed');\n      return false;\n    }\n  };\n  const refreshToken = async () => {\n    try {\n      await axios.post('/api/auth/refresh');\n      // Token is refreshed automatically by the backend\n      toast.info('Session refreshed');\n    } catch (error) {\n      console.error('Token refresh error:', error);\n      logout();\n      toast.error('Session expired. Please log in again.');\n    }\n  };\n  const logout = async () => {\n    try {\n      if (state.token) {\n        await axios.post('/api/auth/logout');\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('token');\n      dispatch({\n        type: AUTH_ACTIONS.LOGOUT\n      });\n      toast.success('Logged out successfully');\n    }\n  };\n  const deleteAccount = async () => {\n    try {\n      await axios.delete('/api/auth/account');\n      localStorage.removeItem('token');\n      dispatch({\n        type: AUTH_ACTIONS.LOGOUT\n      });\n      toast.success('Account deleted successfully');\n      return true;\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      console.error('Delete account error:', error);\n      toast.error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Failed to delete account');\n      return false;\n    }\n  };\n  const updateUser = userData => {\n    dispatch({\n      type: AUTH_ACTIONS.UPDATE_USER,\n      payload: userData\n    });\n  };\n  const clearError = () => {\n    dispatch({\n      type: AUTH_ACTIONS.CLEAR_ERROR\n    });\n  };\n\n  // Context value\n  const value = {\n    ...state,\n    loginWithAirtable,\n    handleAuthCallback,\n    logout,\n    deleteAccount,\n    updateUser,\n    clearError,\n    refreshToken\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"GUSXxL/WUElrtHc/X73NyHNRMdw=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["axios","createContext","useContext","useEffect","useReducer","toast","jsxDEV","_jsxDEV","initialState","user","token","localStorage","getItem","isAuthenticated","loading","error","AUTH_ACTIONS","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","SET_LOADING","CLEAR_ERROR","UPDATE_USER","authReducer","state","action","type","payload","AuthContext","useAuth","_s","context","Error","AuthProvider","children","_s2","dispatch","requestInterceptor","interceptors","request","use","config","headers","Authorization","Promise","reject","responseInterceptor","response","_error$response","status","_error$response$data","data","needsRefresh","refreshToken","logout","eject","getCurrentUser","get","_error$response2","_error$response2$data","console","message","removeItem","loginWithAirtable","window","location","href","authUrl","_error$response3","_error$response3$data","handleAuthCallback","setItem","success","_error$response4","_error$response4$data","post","info","deleteAccount","delete","_error$response5","_error$response5$data","updateUser","userData","clearError","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/boltuzamaki/Downloads/airtable-form-builder/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import axios from 'axios';\nimport { createContext, useContext, useEffect, useReducer } from 'react';\nimport { toast } from 'react-toastify';\n\n// Initial state\nconst initialState = {\n  user: null,\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  loading: true,\n  error: null\n};\n\n// Action types\nconst AUTH_ACTIONS = {\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\n  LOGOUT: 'LOGOUT',\n  SET_LOADING: 'SET_LOADING',\n  CLEAR_ERROR: 'CLEAR_ERROR',\n  UPDATE_USER: 'UPDATE_USER'\n};\n\n// Reducer\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case AUTH_ACTIONS.LOGIN_START:\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n        token: action.payload.token,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGIN_FAILURE:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        error: action.payload\n      };\n    \n    case AUTH_ACTIONS.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    \n    case AUTH_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.UPDATE_USER:\n      return {\n        ...state,\n        user: { ...state.user, ...action.payload }\n      };\n    \n    default:\n      return state;\n  }\n};\n\n// Create context\nconst AuthContext = createContext();\n\n// Custom hook to use auth context\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Auth provider component\nexport const AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Set up axios interceptors\n  useEffect(() => {\n    // Request interceptor to add token\n    const requestInterceptor = axios.interceptors.request.use(\n      (config) => {\n        if (state.token) {\n          config.headers.Authorization = `Bearer ${state.token}`;\n        }\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    // Response interceptor to handle auth errors\n    const responseInterceptor = axios.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (error.response?.status === 401) {\n          // Token expired or invalid\n          if (error.response.data?.needsRefresh) {\n            // Try to refresh token\n            refreshToken();\n          } else {\n            // Logout user\n            logout();\n            toast.error('Your session has expired. Please log in again.');\n          }\n        }\n        return Promise.reject(error);\n      }\n    );\n\n    // Cleanup interceptors\n    return () => {\n      axios.interceptors.request.eject(requestInterceptor);\n      axios.interceptors.response.eject(responseInterceptor);\n    };\n  }, [state.token]);\n\n  // Check if user is authenticated on app load\n  useEffect(() => {\n    if (state.token) {\n      getCurrentUser();\n    } else {\n      dispatch({ type: AUTH_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, []);\n\n  // API functions\n  const getCurrentUser = async () => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.SET_LOADING, payload: true });\n      const response = await axios.get('/api/auth/me');\n      \n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\n        payload: {\n          user: response.data,\n          token: state.token\n        }\n      });\n    } catch (error) {\n      console.error('Get current user error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: error.response?.data?.message || 'Failed to get user data'\n      });\n      localStorage.removeItem('token');\n    }\n  };\n\n  const loginWithAirtable = async () => {\n    try {\n      dispatch({ type: AUTH_ACTIONS.LOGIN_START });\n      \n      const response = await axios.get('/api/auth/airtable');\n      \n      // Redirect to Airtable OAuth\n      window.location.href = response.data.authUrl;\n    } catch (error) {\n      console.error('Airtable login error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: error.response?.data?.message || 'Failed to initiate login'\n      });\n      toast.error('Failed to start login process');\n    }\n  };\n\n  const handleAuthCallback = async (token) => {\n    try {\n      // Store token\n      localStorage.setItem('token', token);\n      \n      // Get user data\n      const response = await axios.get('/api/auth/me', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\n        payload: {\n          user: response.data,\n          token: token\n        }\n      });\n      \n      toast.success('Successfully logged in!');\n      return true;\n    } catch (error) {\n      console.error('Auth callback error:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\n        payload: error.response?.data?.message || 'Login failed'\n      });\n      localStorage.removeItem('token');\n      toast.error('Login failed');\n      return false;\n    }\n  };\n\n  const refreshToken = async () => {\n    try {\n      await axios.post('/api/auth/refresh');\n      // Token is refreshed automatically by the backend\n      toast.info('Session refreshed');\n    } catch (error) {\n      console.error('Token refresh error:', error);\n      logout();\n      toast.error('Session expired. Please log in again.');\n    }\n  };\n\n  const logout = async () => {\n    try {\n      if (state.token) {\n        await axios.post('/api/auth/logout');\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('token');\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n      toast.success('Logged out successfully');\n    }\n  };\n\n  const deleteAccount = async () => {\n    try {\n      await axios.delete('/api/auth/account');\n      localStorage.removeItem('token');\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\n      toast.success('Account deleted successfully');\n      return true;\n    } catch (error) {\n      console.error('Delete account error:', error);\n      toast.error(error.response?.data?.message || 'Failed to delete account');\n      return false;\n    }\n  };\n\n  const updateUser = (userData) => {\n    dispatch({\n      type: AUTH_ACTIONS.UPDATE_USER,\n      payload: userData\n    });\n  };\n\n  const clearError = () => {\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n  };\n\n  // Context value\n  const value = {\n    ...state,\n    loginWithAirtable,\n    handleAuthCallback,\n    logout,\n    deleteAccount,\n    updateUser,\n    clearError,\n    refreshToken\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}